---
const temp = Astro.url.searchParams.get("temp") || "notemp";
const pres = Astro.url.searchParams.get("pres") || "nopres";
console.log(temp, pres);

import { supabase } from "../lib/supabase";

if (temp) {
	const { error } = await supabase
		.from("measurements")
		.insert({ temperatur: parseFloat(temp), tryk: parseFloat(pres) });
	if (error) console.log(`Insert error: ${error}`);
}
---

<html lang="en">
	<head>
		<link href="/styles.css" type="text/css" rel="stylesheet">
		<title>
			Receiver Page
		</title>
	</head>
	<body>
		<button class="btn" type="button" onclick="location.href='../'">Tilbage til forside</button>
		<p>
			This page is for receiving data, will not display anything.
		</p>
	</body>
</html>